# functions and varialbes in the global namespace
# last update:2016-08-24

# Comments ================================================
# - run locally
#   runApp('~/cs/ownyourdata/apps/bank2', host='0.0.0.0', port=1235)
# - copy files to Github
#   cp -r *.R *.r app*.txt www github/app-bank/; cd github/app-bank;

# UI files ================================================
source("uiInit.R")
source("uiDesktop.R")
source("uiMobile.R")

# App specific files ======================================
source('appLib.R')
source('appConstants.R')

# General Variables =======================================
oydLogo <- "data:image/png;base64,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"
# from  http://stackoverflow.com/questions/11381673/detecting-a-mobile-browser
mobileCheck <- "(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4)))"
isMobile <- mobileCheck
isDesktop <- paste0("!", mobileCheck)
statTabUiList <- vector()
piaUrl <- ""
appKey <- ""
appSecret <- ""
